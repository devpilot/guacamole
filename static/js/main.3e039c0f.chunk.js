(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{33:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(15),o=n.n(s),i=n(8),r=(n(33),n(19)),l=n(2),d=n(4),u=n(24),j=n(7),b=n(1),p=Object(c.createContext)({}),O=function(e){var t=e.children,n=Object(c.useState)({loading:!0,data:null}),a=Object(j.a)(n,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){o({loading:!1,data:JSON.parse(window.localStorage.getItem("authData"))})}),[]),Object(c.useEffect)((function(){window.localStorage.setItem("authData",JSON.stringify(s.data))}),[s.data]),Object(b.jsx)(p.Provider,{value:{auth:s,setAuthData:function(e){o({data:e})}},children:t})},h=function(e){var t=e.component,n=Object(u.a)(e,["component"]),a=Object(c.useContext)(p).auth;return a.loading?Object(b.jsx)(l.b,Object(d.a)(Object(d.a)({},n),{},{render:function(){return Object(b.jsx)("p",{children:"Loading..."})}})):Object(b.jsx)(l.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return a.data?Object(b.jsx)(t,Object(d.a)({},e)):Object(b.jsx)(l.a,{to:"/login"})}}))},f=function(e){var t=e.history,n=Object(c.useState)(),a=Object(j.a)(n,2),s=a[0],o=a[1],r=Object(c.useState)(),l=Object(j.a)(r,2),d=l[0],u=l[1],O=Object(c.useContext)(p).setAuthData,h=Object(i.useIndexedDB)("people"),f=h.add,x=h.getByIndex;Object(c.useEffect)((function(){window.localStorage.getItem("addedDefaultUsers")||(m({name:"user1",pass:"123456"}),m({name:"user2",pass:"123456"}),m({name:"user3",pass:"123456"}),window.localStorage.setItem("addedDefaultUsers",!0))}),[]);var m=function(e){f(e).then((function(e){console.log("ID Generated: ",e)}),(function(e){console.log(e)}))};return Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"add-form",children:[Object(b.jsxs)("div",{className:"form-control",children:[Object(b.jsx)("h1",{style:{textAlign:"center"},children:"Login"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s&&d?x("name",s).then((function(e){console.log(e),e&&e.pass===d?(O(s),t.replace("/app")):console.error("Incorrect credectials")})):console.error("Empty credectials")},children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{type:"text",placeholder:"Enter Username",onChange:function(e){o(e.target.value)}}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){u(e.target.value)}}),Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Sign in"})]})]}),Object(b.jsx)("a",{href:"#/signup",children:"Register"})]})})},x=function(e){var t=e.history,n=Object(c.useState)(),a=Object(j.a)(n,2),s=a[0],o=a[1],r=Object(c.useState)(),l=Object(j.a)(r,2),d=l[0],u=l[1],p=Object(i.useIndexedDB)("people").add;return Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"add-form",children:[Object(b.jsxs)("div",{className:"form-control",children:[Object(b.jsx)("h1",{style:{textAlign:"center"},children:"Register"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s&&d?p({name:s,pass:d}).then((function(e){console.log("User Added: ",e),t.replace("/signin")}),(function(e){console.log(e)})):console.error("Empty credectials")},children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{type:"text",placeholder:"Enter Username",onChange:function(e){o(e.target.value)}}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){u(e.target.value)}}),Object(b.jsx)("button",{type:"submit",className:"btn btn-register",children:"Sign Up"})]})]}),Object(b.jsx)("a",{href:"#/signin",children:"Login"})]})})},m=n(10),g="todo/added",v="todo/removed",y="todo/toggle",D="todo/populate",k="todo/update",S=function(e){var t=e.task,n=e.onEdit,c=e.onDelete,a=e.onToggle;return Object(b.jsxs)("div",{className:"task ".concat(t.status?"status":""),onDoubleClick:function(){return a(t.id)},children:[Object(b.jsx)("input",{type:"checkbox",onChange:function(){return a(t.id)},defaultChecked:"".concat(t.status?"checked":"")}),Object(b.jsx)("h3",{children:t.title}),Object(b.jsx)("p",{children:t.desc}),Object(b.jsx)("button",{onClick:function(){return n(t.id)},children:"Edit"}),Object(b.jsx)("button",{onClick:function(){return c(t.id)},style:{color:"red"},children:"Delete"})]})},I=function(e){var t=e.isEdit,n=e.setIsEdit,a=e.setTitle,s=e.setDesc,o=Object(i.useIndexedDB)("task"),r=o.getAll,l=o.update,u=o.deleteRecord,j=Object(m.c)((function(e){return e.todo})),O=Object(c.useContext)(p).auth,h=Object(m.b)();Object(c.useEffect)((function(){r().then((function(e){var t=e.filter((function(e){return e.personId===O.data}));h({type:D,payload:t}),console.log(t)}),(function(e){console.log(e)}))}),[]);var f=function(e){var t=j.filter((function(t){return t.id===e}));t=t[0],console.log(t),l(Object(d.a)(Object(d.a)({},t),{},{status:!t.status,personId:O.data})).then((function(t){h({type:y,payload:{id:e}})}))},x=function(e){t||u(e).then((function(t){h({type:v,payload:{id:e}})}))},g=function(e){var t=j.filter((function(t){return t.id===e}));t=t[0],n(t),a(t.title),s(t.desc),window.scrollTo(0,0)};return Object(b.jsx)(b.Fragment,{children:j.length>0?j.map((function(e){return Object(b.jsx)(S,{task:e,onDelete:x,onToggle:f,onEdit:g},e.id)})):"No Tasks to show"})},N=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),s=a[0],o=a[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),d=l[0],u=l[1],O=Object(c.useState)(""),h=Object(j.a)(O,2),f=h[0],x=h[1],v=Object(m.b)(),y=Object(i.useIndexedDB)("task"),D=y.add,S=y.update,N=Object(c.useContext)(p).auth;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"add-form",children:Object(b.jsxs)("div",{className:"form-control",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"form-label",children:"Title"}),Object(b.jsx)("input",{ref:e,type:"text",placeholder:"Title",value:s,onChange:function(e){o(e.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"form-label",children:"Description"}),Object(b.jsx)("textarea",{ref:t,placeholder:"description (optional)",value:d,onChange:function(e){u(e.target.value)}})]}),f?Object(b.jsx)("button",{className:"btn btn-register",onClick:function(){if(s){var n=s,c=d;S({id:f.id,title:n,desc:c,status:f.status,personId:N.data}).then((function(e){v({type:k,payload:{id:f.id,title:n,desc:c}})}),(function(e){console.log(e)})),e.current.value="",t.current.value="",x(""),o(""),u("")}else alert("please add title")},type:"submit",children:"Update"}):Object(b.jsx)("button",{className:"btn btn-success",onClick:function(){if(s){var n=s,c=d;D({title:n,desc:c,status:!1,personId:N.data}).then((function(e){console.log("ID Generated: ",e),v({type:g,payload:{id:e,title:n,desc:c}})}),(function(e){console.log(e)})),e.current.value="",t.current.value="",o(""),u("")}else alert("please add title")},type:"submit",children:"Add"})]})}),Object(b.jsx)(I,{setIsEdit:x,setTitle:o,setDesc:u,isEdit:f})]})},w=function(){var e=Object(c.useContext)(p),t=e.setAuthData,n=e.auth;return Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsxs)("h2",{className:"header",children:[" ","Hello, ".concat(n.data)," "]}),Object(b.jsx)("button",{className:"btn btn-logout",onClick:function(){t(null)},children:"Log out"})]})},E=function(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(w,{}),Object(b.jsx)(N,{})]})},C=function(){return Object(b.jsx)(r.a,{children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/login",component:f}),Object(b.jsx)(l.b,{path:"/signup",component:x}),Object(b.jsx)(h,{path:"/app",component:E}),Object(b.jsx)(l.a,{from:"/",to:"/app"})]})})},T=n(12),_=n(28);var U=Object(T.b)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return[].concat(Object(_.a)(e),[{id:t.payload.id,title:t.payload.title,desc:t.payload.desc,status:!1}]);case v:return e.filter((function(e){return e.id!==t.payload.id}));case y:return e.map((function(e){return e.id===t.payload.id?Object(d.a)(Object(d.a)({},e),{},{status:!e.status}):e}));case D:return e.todo=t.payload;case k:return e.map((function(e){return e.id===t.payload.id?Object(d.a)(Object(d.a)({},e),{},{title:t.payload.title,desc:t.payload.desc}):e}));default:return e}}}),A=Object(T.c)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Object(i.initDB)({name:"MyDB",version:1,objectStoresMeta:[{store:"people",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"pass",keypath:"pass",options:{unique:!1}}]},{store:"task",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"peopleId",keypath:"peopleId",options:{unique:!1}},{name:"title",keypath:"title",options:{unique:!1}},{name:"desc",keypath:"desc",options:{unique:!1}},{name:"status",keypath:"status",options:{unique:!1}}]}]}),o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(m.a,{store:A,children:Object(b.jsx)(O,{children:Object(b.jsx)(C,{})})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.3e039c0f.chunk.js.map